<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>중소기업 정보 조회</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"
          integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
          crossorigin="anonymous"></script>


  <style>
    #button_1{
    border: 0;
    background-color: transparent;
    }

    #button_2{
    border: 0;
    background-color: transparent;
    }

    #button_1:hover{
    background-color: gray;
    }

    #button_2:hover{
    background-color: gray;
    }
    </style>
</head>



<body>



<script>
        function saveFn(){

        alert("나의 업체 목록에 저장되었습니다.");

        var rowData = new Array();
        var tdArr = new Array();
        var checkbox = $("input[name=myboard-checkbox]:checked");

        checkbox.each(function(i) {

        var tr = checkbox.parent().parent().eq(i);
        var td = tr.children();

        var num = td.eq(4).text().trim();

        var num1 = Number(num);

        tdArr.push(num1);


        var n;
        var num = tdArr.length;

        for (let n = 0; n < num; ++n) {

        $.ajax({
        url : '/myboard/delete',
        type : 'POST',
        dataType : 'json',
        data : {
        'COMPANYNUM_SAVE' : tdArr[n]
        },
        success : function(data){
        }
        });

        }


		});
        $("input[name=myboard-checkbox]").prop("checked", false);
		}
</script>

<script>
    function selectAll(selectAll)  {
  const checkboxes
       = document.getElementsByName('myboard-checkbox');

  checkboxes.forEach((checkbox) => {
    checkbox.checked = selectAll.checked;
  })
}
</script>

<script>
  function reload(){
  location.reload();
  }
</script>


<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" crossorigin="anonymous"></script>

<header class="d-flex align-items-center pb-3 border-bottom" style="height: 150px; background-color: rgb(0,52,113);">
  <a href="http://localhost:8090/mainframe" class="d-flex align-items-center text-body-emphasis text-decoration-none">
    <svg class="bi me-2" width="40" height="32"><use xlink:href="#bootstrap"></use></svg>
    <li id="main-logo"  style="margin-right: 30px; margin-top: 10px; cursor: pointer; list-style: none; padding-left: 0px;">
      <img id="logo" src="https://estm.sbdc.or.kr/statics/images/comm/img_logo.png" style="width:260px; height:45px; margin-top: 3%; margin-left:3%">
    </li>
  </a>
</header>

<div class="col-lg-8 mx-auto p-4">
  <header class="d-flex align-items-center pb-3 mb-2 border-bottom" style="margin-left:30px">
    <a href="/" class="d-flex align-items-center text-body-emphasis text-decoration-none">
      <svg class="bi me-2" width="30" height="32"><use xlink:href="#bootstrap"></use></svg>
      <span class="fs-4"><strong>중소기업 정보조회 시스템</strong></span>
    </a>
  </header>
</div>


<div class="d-flex flex-column flex-shrink-0 p-3 bg-body-tertiary" style="width: 280px; float: left;">
  <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none" style="margin-left: 17%;">
    <svg class="bi pe-none me-2" width="40" height="32"><use xlink:href="#bootstrap"></use></svg>
    <span class="fs-4"><strong>메뉴</strong></span>
  </a>
  <hr>
  <ul class="nav nav-pills flex-column mb-auto">
    <li>
      <a href="#" class="nav-link link-body-emphasis">
        <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#speedometer2"></use></svg>
        <button id="button_1" type="button" style="width: 200px; height: 30px;" onclick="location.href='http://localhost:8090/mainboard#'"><strong>기업정보 조회</strong></button>
      </a>
    </li>
    <li>
      <a href="#" class="nav-link link-body-emphasis">
        <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#table"></use></svg>
        <button id="button_2" type="button" style="width: 200px; height: 30px;" onclick="location.href='http://localhost:8090/myboard'"><strong>나의 업체 관리</strong></button>
      </a>
    </li>
  </ul>
  <hr>
</div>



<div style="width:1150px; height:700px; float: right; margin-left: 20px; margin-right: 50px;">
  <main>
    <h2 style="font-size: 20px; margin-bottom: 30px; margin-top: 20px;"><strong>나의 업체 목록</strong></h2>

    <div style="margin-bottom: 20px; margin-left: 87%;">
      <button onclick="saveFn()">제출</button>
    </div>

    <div class="table-responsive small">
      <table class="table table-striped table-sm">
        <thead>
        <tr>
          <th scope="col"><input type='checkbox'
                                 name='myboard-checkbox'
                                 value='selectall'
                                 onclick='selectAll(this)'/></th>
          <th scope="col">No.</th>
          <th scope="col">업체명</th>
          <th scope="col">업종</th>
          <th scope="col">사업자등록번호</th>
          <th scope="col">확인서/인증서 유무</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="TB_BOARD_SAVE : ${list} ">
          <td><input type="checkbox" name="myboard-checkbox"></td>
          <td th:text="${TB_BOARD_SAVE.COLUMN1_SAVE}">Text</td>
          <td th:text="${TB_BOARD_SAVE.COMPANYNAME_SAVE}">Text</td>
          <td th:text="${TB_BOARD_SAVE.SERVICECODE_SAVE}">Text</td>
          <td th:text="${TB_BOARD_SAVE.COMPANYNUM_SAVE}">Text</td>
          <td th:text="${TB_BOARD_SAVE.CERTIFICATION_SAVE}">Text</td>
        </tr>
        </tbody>
      </table>

      <th:block th:each="page : ${#numbers.sequence(startPage, endPage)}">
        <a th:if="${page != nowPage}" th:href="@{/myboard(page = ${page -1})}" th:text="${page}"></a>
        <strong th:if="${page == nowPage}" th:text="${page}" style="color : red"></strong>
      </th:block>

    </div>

  </main>
</div>


</body>


</html>